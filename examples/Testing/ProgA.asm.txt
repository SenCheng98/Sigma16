; ProgA: test linker
; This file is part of Sigma16, see https://jtod.github.io/home/Sigma16/

; Usage:
;   sigma16 assemble ProgA
;   sigma16 assemble ProgAmod1
;   sigma16 assemble ProgAmod2
;   sigma16 link Exe Main ProgAmod1

; In the link command, the operands are separated by spaces.  The
; first operand is the basename of the executable output. This is
; followed by the basenames of the object files.

Main  module
      load   R1,x[R0]
      load   R2,y[R0]
      load   R3,pqr[R0]
      load   R4,z[R0]
      add    R5,R1,R3
      jal    R14,fcn[R0]
      store  R3,x[R0]
      store  R3,res[R0]
      trap   R0,R0,R0
fcn   import ProgAmod1,fcn      
res   data   0
x     import ProgAmod1,abc
y     import ProgAmod1,def
pqr   import ProgAmod2,pqr
z     import ProgAmod2,xyz

